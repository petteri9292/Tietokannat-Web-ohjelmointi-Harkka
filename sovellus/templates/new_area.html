{% extends "layout.html" %}

{% block title %}
    Create New Discussion Area
{% endblock %}

{% block content %}
    <h1>Create a New Discussion Area</h1>
    <hr>
    
    <!-- Check if the user is logged in and is an admin -->
    {% if session.username and session.role == 'admin' %}
        <!-- Form for creating a new discussion area (only visible to admins) -->
        <form action="/create_area" method="POST">
            <p>
                <label for="name">Area Name:</label><br>
                <input type="text" id="name" name="name" required>
            </p>
            <p>
                <label for="description">Description:</label><br>
                <textarea id="description" name="description" rows="4" cols="50" required></textarea>
            </p>
            <p>
                <label for="is_secret">Secret Area:</label>
                <input type="checkbox" id="is_secret" name="is_secret" value="1">
            </p>
            <p>
                <label for="users">Grant access to secret areas for users (comma-separated usernames):</label><br>
                <input type="text" id="users" name="users" placeholder="user1, user2">
            </p>
            <p>
                <input type="submit" value="Create Area">
                <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
            </p>
        </form>
    {% else %}
        <!-- Message for users who are not logged in or are not admins -->
        <p>You must be an admin to create a new discussion area. <a href="/login">Log in here</a>.</p>
    {% endif %}

    <!-- Link back to home or discussion areas list -->
    <p><a href="/">Back to Home</a></p>
{% endblock %}
