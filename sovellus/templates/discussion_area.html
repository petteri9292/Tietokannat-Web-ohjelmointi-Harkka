{% extends "layout.html" %}

{% block title %}
    {{ area.name }}
{% endblock %}

{% block content %}
    {% if session.username %}
        <!-- Content for logged-in users only -->

        <h2>{{ area.name }}</h2>
        <p>{{ area.description }}</p>

        {% if threads %}
            {% for thread in threads %}
                {% if not thread.is_hidden %}
                    <div class = "thread">
                        <a class="thread-link" href="/thread/{{ thread.id }}">
                            <h3 class="thread-title">{{ thread.title }}</h3>
                        </a>
                        <p>Created by: {{ thread.author }}, Created at {{ thread.created_at.strftime(" %H:%M %d.%m.%Y ") }}</p>
                        <p>Number of messages: {{ thread.message_count }}</p>

                        {% if thread.author == session.username or session.role == 'admin' %}
                            <!-- Edit and delete buttons visible only to the thread author or admin -->
                            <a href="/edit_thread/{{ thread.id }}">Edit</a>
                            <a href="/delete_thread/{{ thread.id }}" onclick="return confirm('Are you sure you want to delete this thread?');">Delete</a>
                        {% endif %}
                    </div>
                {% endif %}
            {% endfor %}
        {% else %}
            <p>No threads available.</p>
        {% endif %}
        <a href="/">Return</a>
        <a href="/new_thread?area_id={{ area.id }}">Create new thread</a>

    {% else %}
        <p>You must be logged in to view the content of this area.</p>

        

    {% endif %}
{% endblock %}
